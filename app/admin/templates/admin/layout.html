<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{{ title or 'Panel de Administraci贸n' }} - ILISB Admin{% endblock %}</title>
    {{ bootstrap.load_css() }}
    <link rel="icon" href="{{ url_for('static', filename='img/favicon.png') }}" type="image/png">
</head>
<body class="bg-light">
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-3 col-lg-2 bg-dark text-white p-0">
                <div class="p-3 min-vh-100">
                    <!-- Logo y t铆tulo -->
                    <div class="text-center mb-4 border-bottom border-secondary pb-3">
                        <h4 class="text-white mb-0">ILISB Admin</h4>
                        <small class="text-light">Panel de Administraci贸n</small>
                    </div>
                    
                    <!-- Informaci贸n del usuario -->
                    <div class="card bg-secondary border-0 mb-4">
                        <div class="card-body text-white p-3">
                            <div class="d-flex align-items-center">
                                <div class="me-3">
                                    {% if current_user.is_superuser %}
                                        <span class="badge bg-warning text-dark">SUPER</span>
                                    {% else %}
                                        <span class="badge bg-info">ADMIN</span>
                                    {% endif %}
                                </div>
                                <div>
                                    <div class="fw-bold">{{ current_user.username }}</div>
                                    <small>{{ current_user.first_name }}</small>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Men煤 de navegaci贸n -->
                    <nav class="nav flex-column">
                        <a href="{{ url_for('admin.dashboard') }}" 
                           class="nav-link text-white {% if request.endpoint == 'admin.dashboard' %}bg-primary rounded{% endif %}">
                            Dashboard
                        </a>
                        
                        <div class="text-light px-3 py-2 mt-3 border-bottom border-secondary">
                            <small class="text-uppercase fw-bold">Gesti贸n Acad茅mica</small>
                        </div>
                        
                        <a href="{{ url_for('admin.cursos') }}" 
                           class="nav-link text-white {% if request.endpoint in ['admin.cursos', 'admin.editar_curso'] %}bg-primary rounded{% endif %}">
                            Cursos
                        </a>
                        
                        <a href="{{ url_for('admin.alumnos') }}" 
                           class="nav-link text-white {% if request.endpoint in ['admin.alumnos', 'admin.nuevo_alumno', 'admin.editar_alumno'] %}bg-primary rounded{% endif %}">
                            Estudiantes
                        </a>
                        
                        <a href="{{ url_for('admin.docentes') }}" 
                           class="nav-link text-white {% if request.endpoint in ['admin.docentes', 'admin.nuevo_docente', 'admin.editar_docente'] %}bg-primary rounded{% endif %}">
                            Docentes
                        </a>
                        
                        <a href="{{ url_for('admin.grupos') }}" 
                           class="nav-link text-white {% if request.endpoint in ['admin.grupos', 'admin.nuevo_grupo', 'admin.editar_grupo'] %}bg-primary rounded{% endif %}">
                            Grupos
                        </a>                        <div class="text-light px-3 py-2 mt-3">
                            <small class="text-uppercase fw-bold">Sistema</small>
                        </div>
                        
                        <a href="{{ url_for('admin.users') }}" 
                           class="nav-link text-white {% if request.endpoint == 'admin.users' %}bg-primary rounded{% endif %}">
                            Administradores
                        </a>
                        
                        <a href="{{ url_for('marketing.admin_aliados') }}" 
                           class="nav-link text-white">
                             Marketing
                        </a>
                        
                        <div class="text-light px-3 py-2 mt-3">
                            <small class="text-uppercase fw-bold">Acciones</small>
                        </div>
                        
                        <a href="{{ url_for('core.index') }}" 
                           class="nav-link text-white" target="_blank">
                             Ver sitio web
                        </a>
                        
                        <a href="{{ url_for('admin.logout') }}" 
                           class="nav-link text-danger">
                             Cerrar sesi贸n
                        </a>
                    </nav>
                </div>
            </div>
            
            <!-- Contenido principal -->
            <main class="col-md-9 col-lg-10">
                <!-- rea de contenido -->
                <div class="p-4">
                    {# Incluimos el parcial desde la carpeta global de plantillas #}
                    {% include '_flash_messages.html' %}
                    
                    {% block admin_content %}{% endblock %}
                </div>
            </main>
        </div>
    </div>

    {{ bootstrap.load_js() }}
    {% block scripts %}{% endblock %}
</body>
</html>