{% extends "webapps/base_aplicativo.html" %}

{% block title %}{{ aplicativo.nombre }}{% endblock %}

{% block aplicativo_content %}

{# Menú de Pestañas para seleccionar la magnitud #}
<ul class="nav nav-tabs mb-3">
    {% for categoria, datos in unidades.items() %}
    <li class="nav-item">
        <a class="nav-link {% if categoria == magnitud_activa %}active{% endif %}" href="{{ url_for('webapps.aplicativo_detail', slug=aplicativo.slug, magnitud=categoria) }}">{{ datos.nombre }}</a>
    </li>
    {% endfor %}
</ul>

<div class="card">
    <div class="card-header">
        <h5 class="mb-0">Conversor de {{ unidades[magnitud_activa].nombre }}</h5>
    </div>
    <div class="card-body">
        <form action="" method="GET">
            {# Campos ocultos para mantener el estado #}
            <input type="hidden" name="magnitud" value="{{ magnitud_activa }}">

            <div class="row align-items-end">
                {# Campo para introducir el valor a convertir #}
                <div class="col-md-4">
                    <label for="valor_entrada" class="form-label">Valor a Convertir</label>
                    <input type="text" inputmode="decimal" class="form-control" id="valor_entrada" name="valor_entrada" value="{{ valor_entrada or '' }}" required>
                </div>

                {# Selector para la unidad de origen #}
                <div class="col-md-4">
                    <label for="unidad_origen" class="form-label">Desde la Unidad</label>
                    <select class="form-select" id="unidad_origen" name="unidad_origen">
                        {% for slug, u in unidades[magnitud_activa].unidades.items() %}
                            <option value="{{ slug }}" {% if slug == unidad_origen %}selected{% endif %}>{{ u.nombre|safe }}</option>
                        {% endfor %}
                    </select>
                </div>

                {# Botón para ejecutar el cálculo #}
                <div class="col-md-4">
                    <button type="submit" class="btn btn-primary w-100">Convertir</button>
                </div>
            </div>
        </form>
    </div>
</div>

{# Sección para mostrar los resultados #}
{% if resultados %}
<div class="card mt-4">
    <div class="card-header">
        <h5 class="mb-0">Resultados</h5>
    </div>
    <div class="card-body">
        <p class="lead">
            <strong>{{ valor_entrada }}</strong> {{ unidades[magnitud_activa].unidades[unidad_origen].nombre|safe }} equivale a:
        </p>
        <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
            {% for slug, valor in resultados.items() %}
            <div class="col">
                <div class="p-2 border rounded">
                    <span class="fs-4">{{ valor|format_number(4) }}</span>
                    <span class="text-muted">{{ unidades[magnitud_activa].unidades[slug].nombre|safe }}</span>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endif %}

{% endblock %}

{% block instrucciones_titulo %}
    {{ aplicativo.nombre }}
{% endblock %}

{% block instrucciones_content %}
    <p>Ahorre tiempo y simplifique sus conversiones con nuestra herramienta líder en el mercado. Diseñada para todos, nuestro aplicativo ofrece:</p>
    <ol>
        <li>Facilidad y conveniencia: Olvídese de las búsquedas en tablas o los cálculos manuales. Con nuestra herramienta, realice conversiones rápidas y precisas en cualquier momento y lugar.</li>
        <li>Convertir entre una variedad de unidades: Desde longitud, masa, tiempo, temperatura, volumen, velocidad, presión u otras unidades, nuestro aplicativo lo cubre todo.</li>
        <li>Interfaz amigable e intuitiva: Nuestra interfaz simplificada le permite realizar conversiones de manera sencilla, sin importar su nivel de experiencia.</li>
        <li>Simplemente ingrese el valor, seleccione la unidad de origen y haga clic en "Convertir" para obtener instantáneamente la conversión a múltiples unidades en una sola pantalla.</li>
    </ol>
    <p>Simplifique sus tareas diarias y mejore su productividad con nuestro aplicativo líder en el mercado.</p>
{% endblock %}