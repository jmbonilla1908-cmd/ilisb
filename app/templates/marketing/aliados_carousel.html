<div class="container my-5">
    <h4 class="text-center mb-4 text-muted">Nuestros Aliados Estratégicos</h4>
    
    <div id="aliadosCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
        <div class="carousel-inner">
            {% set slides = aliados_estrategicos | batch(4) | list %}
            {% for slide_aliados in slides %}
            <div class="carousel-item {% if loop.first %}active{% endif %}" data-bs-interval="5000">
                <div class="row align-items-center justify-content-center">
                    {% for aliado in slide_aliados %}
                    <div class="col-lg-3 col-md-4 col-sm-6 mb-3">
                        <div class="aliado-card text-center p-3" style="min-height: 120px;">
                            {% if aliado.sitio_web %}
                            <a href="#" 
                               class="aliado-link d-block" 
                               data-aliado-id="{{ aliado.id }}"
                               data-url="{{ aliado.sitio_web }}"
                               title="{{ aliado.nombre_empresa }}">
                            {% endif %}
                                <img src="{{ aliado.logo_url }}" 
                                     class="img-fluid aliado-logo" 
                                     alt="{{ aliado.nombre_empresa }}"
                                     style="max-height: 80px; object-fit: contain;">
                                {% if aliado.descripcion %}
                                <p class="small text-muted mt-2 mb-0">{{ aliado.nombre_empresa }}</p>
                                {% endif %}
                            {% if aliado.sitio_web %}
                            </a>
                            {% endif %}
                        </div>
                    </div>
                    {% endfor %}
                    
                    {# Rellenar espacios vacíos en la última slide si es necesario #}
                    {% if slide_aliados|length < 4 %}
                        {% for i in range(4 - slide_aliados|length) %}
                        <div class="col-lg-3 col-md-4 col-sm-6"></div>
                        {% endfor %}
                    {% endif %}
                </div>
            </div>
            {% endfor %}
        </div>
        
        <button class="carousel-control-prev" type="button" data-bs-target="#aliadosCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Anterior</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#aliadosCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Siguiente</span>
        </button>

    </div>
</div>